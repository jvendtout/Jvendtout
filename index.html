<!DOCTYPE html>
<html lang="fr">
<head>
<link href="https://fonts.googleapis.com/css2?family=Inter&family=Poppins&family=Lato&display=swap" rel="stylesheet">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="UTF-8">
  <title>J'vend tout</title>
  <style>
  body {
  margin: 0;
  padding: 2rem;
  font-family: 'Inter', sans-serif;
  background: linear-gradient(to bottom right, #2e003e, #6a0572);
  color: white;
  height: 100vh;
  }


    summary {
      font-weight: bold;
      cursor: pointer;
      background-color: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 10px;
      padding: 10px 15px;
      margin-bottom: 5px;
      transition: background-color 0.3s;
    }

    summary:hover {
      background-color: rgba(255, 255, 255, 0.2);
    }

    details {
      margin-bottom: 15px;
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 10px;
      padding: 5px 10px;
    }

    ul {
      list-style: none;
      padding-left: 20px;
    }

    li {
      margin: 5px 0;
    }

    .in-stock {
      color: #8ef58e;
      font-weight: bold;
      font-family: 'Lato', sans-serif;
    }

    .out-stock {
      color: #ffd369;
      font-weight: bold;
      font-family: 'Lato', sans-serif;
    }

    p, li {
      color: #fff;
    }

    p.indent {
      margin-left: 40px;
    }

    li.indent {
      margin-left: 40px;
    }

    details details summary {
      margin-left: 20px;
    }

    details details ul li {
      margin-left: 40px;
    }

    .button-style {
      display: inline-block;
      padding: 5px 12px;
      margin: 2px;
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 8px;
      background-color: rgba(255, 255, 255, 0.1);
      color: white;
    }
	#top-banner {
  top: 0;
  left: 0;
  width: 100%;
  background-color: #6a05ff;
  color: white;
  padding: 12px 20px;
  font-size: 1.2rem;
  font-weight: bold;
  z-index: 9999;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

	}
	
	#top-banner a {
	color: #ffd369;
	text-decoration: underline;
	}
	
	#top-banner a:hover {
	color: white;
	text-decoration: none;
	}
	
	#bottom-banner {
	position: fixed;
	bottom: 0;
	left: 0;
	width: 100%;
	background-color: #6a0572;
	color: white;
	text-align: center;
	padding: 12px 0;
	font-size: 1.2rem;
	font-weight: bold;
	z-index: 9999;
	box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.5);
	}
	
	#bottom-banner a {
	color: #ffd369;
	text-decoration: underline;
	}
	
	#bottom-banner a:hover {
	color: white;
	text-decoration: none;
	}
		
	#cart {
	background: #1c1c1c;
	padding: 10px;
	border-radius: 10px;
	font-size: 0.85rem;
	width: 230px
	}
	
	#cart-button {
  background-color: #ffd369;
  color: #000;
  border: none;
  border-radius: 8px;
  padding: 8px 16px;
  font-weight: bold;
  font-size: 1rem;
  cursor: pointer;
  transition: background-color 0.3s;
  margin-right: 24px;
}

#cart-button:hover {
  background-color: #fcbf49;
}
#cart-modal .modal-content {
  background: linear-gradient(135deg, #2e003e, #6a0572); /* violet pro */
  color: white;
  border-radius: 10px;
  padding: 20px;
  font-family: 'Inter', sans-serif;
}


#cart-list li {
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#cart-list button {
  background: #ffd369;
  color: #000;
  border: none;
  padding: 5px 10px;
  border-radius: 6px;
  font-weight: bold;
  cursor: pointer;
}


.container {
  display: flex;
  flex-direction: row;
  width: 100%;
  height: 100vh;
  overflow: hidden;
}

/* Colonne gauche : produits */
.product-list {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  background: #2e004f; /* fond violet fonc√© */
  color: white;
}

  .banner {
    font-family: 'Poppins', sans-serif;
  }

  .product-item {
    font-family: 'Lato', sans-serif;
    cursor: pointer;
  }
  
  modal {
  font-family: 'Lato', sans-serif;
  color: #000000;
  }
    .modal.hidden { display: none; }
.modal {
  width: 500px;
  max-width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #5f259f, #8a2be2);
  color: white;
  flex-shrink: 0;
  position: relative;
  box-shadow: -2px 0 8px rgba(0,0,0,0.3);
  z-index: 1000;
}

.modal-content {
  padding: 20px;
  height: 100%;
  box-sizing: border-box;
  position: relative;
  font-family: 'Segoe UI', sans-serif;
}
    .modal .close {
      position: absolute;
      right: 15px;
      top: 10px;
      cursor: pointer;
      font-size: 24px;
    }
	
.modal.show {
  display: block;
  position: fixed; /* Fixe dans l'√©cran */
  top: 0;
  right: 0;
  width: 400px;
  max-width: 100%;
  height: 100%;
  z-index: 1000;
}

   
/* Responsive mobile : la modale prend tout l‚Äô√©cran */
@media screen and (max-width: 650px) {
  .container {
  height: auto;
  overflow: visible;
  flex-direction: column;
  }

  .modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    width: 100%;
    height: 100%;
    margin: 0;
    max-width: none;
    z-index: 1000;
  }

  .product-list {
    height: auto;
    overflow-y: visible;
  }
}

/* Pour tout le document */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: auto;
  scrollbar-width: none;        /* Firefox */
  -ms-overflow-style: none;     /* Internet Explorer / Edge Legacy */
}

/* Pour Chrome, Safari, Edge (Chromium), Opera */
html::-webkit-scrollbar,
body::-webkit-scrollbar {
  display: none;
}

  </style>
</head>
<body>	

<div id="top-banner">
  <span>‚ö†Ô∏è Site en d√©veloppement ‚ö†Ô∏è</span>
<button id="cart-button">
  üõí <span id="cart-label">Total : <span id="cart-total">0</span> ‚Ç¨</span>
</button>

</div>


<div class="banner" id="bottom-banner">
  Pour commander, <a href="https://www.snapchat.com/add/jvendtous" target="_blank" rel="noopener noreferrer">contacte moi sur snap</a>
</div>


<div class="container"> 

	<script>
async function chargerArticles() {
  try {
    const res = await fetch("articles.json"); // charge ton fichier
    const articles = await res.json();

    const productList = document.querySelector(".product-list");
    productList.innerHTML = ""; // nettoie ce qu'il y avait

    articles.forEach(article => {
      // cr√©e un √©l√©ment <li> comme ceux que tu avais avant
      const li = document.createElement("li");
      li.classList.add("product-item");
      li.dataset.name = article.id;
      li.dataset.price = article.prix;
      li.dataset.description = article.description;
      li.dataset.img = article.image || "";
      li.dataset.video = article.video || "";

      li.innerHTML = `<span class="in-stock">1</span> ${article.nom} üì∑ : ${article.prix}‚Ç¨`;

      productList.appendChild(li);
    });

    // r√©attache les √©v√©nements (ouvrir la modale etc.)
    document.querySelectorAll('.product-item').forEach(item => {
      item.addEventListener('click', () => {
        const modal = document.getElementById('product-modal');
        document.getElementById('modal-title').textContent = `${item.dataset.name} - ${item.dataset.price}‚Ç¨`;
        document.getElementById('modal-description').textContent = item.dataset.description;

        const img = document.getElementById('modal-img');
        const video = document.getElementById('modal-video');

        if (item.dataset.img) {
          img.src = item.dataset.img;
          img.style.display = "block";
        } else {
          img.style.display = "none";
        }

        if (item.dataset.video) {
          video.src = item.dataset.video;
          video.style.display = "block";
        } else {
          video.style.display = "none";
        }

        modal.classList.add("show");
        modal.classList.remove("hidden");
      });
    });

  } catch (err) {
    console.error("Erreur chargement articles.json", err);
  }
}

// appel automatique
chargerArticles();
</script>

  <div id="product-modal" class="modal hidden">
    <div class="modal-content">
      <span class="close">‚úñ</span>
      <h2 id="modal-title"></h2>
      <p id="modal-description"></p>
	  <div id="cart-controls" style="display: flex; align-items: center; justify-content: flex-end; gap: 10px; margin-top: 20px;">
  <button id="remove-one" style="display:none; background: transparent; border: none; color: white; font-size: 1.2rem; cursor: pointer;">üóëÔ∏è</button>
  <span id="item-qty" style="display:none; font-weight: bold;">x1</span>
  <button id="add-to-cart" style="background: #ffd369; color: black; padding: 8px 14px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold;">
    üõí Ajouter
  </button>
</div>
      <img id="modal-img" style="max-width:100%; display:none;" />
      <video id="modal-video" controls style="max-width:100%; display:none;"></video>
    </div>
  </div>
</div>

<div id="cart-modal" class="modal hidden">
  <div class="modal-content">
    <span class="close">‚úñ</span>
    <h2>üõí Votre panier</h2>
    <ul id="cart-list"></ul>
    <p style="margin-top: 1rem;"><strong>Total :</strong> <span id="cart-modal-total">0</span> ‚Ç¨</p>
  </div>
</div>

  <script>
document.querySelectorAll('.product-item').forEach(item => {
  item.addEventListener('click', () => {
    const modal = document.getElementById('product-modal');
    const title = document.getElementById('modal-title');
    const description = document.getElementById('modal-description');
    const img = document.getElementById('modal-img');
    const video = document.getElementById('modal-video');
    const name = item.dataset.name;
    const price = parseFloat(item.dataset.price);
    const existing = cart.find(p => p.name === name);

    currentProduct = {
      name: name,
      price: price,
      qty: existing ? existing.qty : 0
    };

    updateQtyDisplay();

    // Affiche les infos du produit
    title.textContent = `${name} - ${price}‚Ç¨`;
    description.textContent = item.dataset.description || '';

    if (item.dataset.img) {
      img.src = item.dataset.img;
      img.style.display = 'block';
    } else {
      img.style.display = 'none';
    }

    if (item.dataset.video) {
      video.src = item.dataset.video;
      video.style.display = 'block';
    } else {
      video.style.display = 'none';
    }
		// Fermer la modale panier si ouverte
	cartModal.classList.remove('show');
	cartModal.classList.add('hidden');
    modal.classList.add('show');
    modal.classList.remove('hidden');
  });
});

  
const cart = [];
const cartItemsEl = document.getElementById('cart-items');
const cartTotalEl = document.getElementById('cart-total');

const addToCartBtn = document.getElementById('add-to-cart');
const removeOneBtn = document.getElementById('remove-one');
const qtyDisplay = document.getElementById('item-qty');

let currentProduct = {
  name: '',
  price: 0,
  qty: 0
};

const cartModal = document.getElementById('cart-modal');
const cartList = document.getElementById('cart-list');
const cartModalTotal = document.getElementById('cart-modal-total');

cartModal.querySelector('.close').addEventListener('click', () => {
  cartModal.classList.remove('show');
  cartModal.classList.add('hidden');
});

function updateCartModal() {
  cartList.innerHTML = '';
  let total = 0;

  cart.forEach(item => {
    const li = document.createElement('li');

    const name = document.createElement('span');
    name.textContent = `${item.name} x${item.qty}`;

    const controls = document.createElement('div');
    controls.style.display = 'flex';
    controls.style.gap = '5px';

    const plus = document.createElement('button');
    plus.textContent = '+';
    plus.onclick = () => {
      item.qty += 1;
      updateCartUI();
      updateCartModal();
    };

    const minus = document.createElement('button');
    minus.textContent = '‚àí';
    minus.onclick = () => {
      item.qty -= 1;
      if (item.qty <= 0) cart.splice(cart.indexOf(item), 1);
      updateCartUI();
      updateCartModal();
    };

    controls.appendChild(minus);
    controls.appendChild(plus);

    li.appendChild(name);
    li.appendChild(controls);
    cartList.appendChild(li);

    total += item.qty * item.price;
  });

  cartModalTotal.textContent = total.toFixed(2);
}

function updateCartUI() {
  let total = 0;
  cart.forEach(item => {
    total += item.price * item.qty;
  });

const totalSpan = document.getElementById('cart-total');
const labelSpan = document.getElementById('cart-label');

if (total === 0) {
  labelSpan.style.display = 'none';
} else {
  totalSpan.textContent = total.toFixed(2);
  labelSpan.style.display = 'inline';
}
}
	
function updateQtyDisplay() {
  if (currentProduct.qty > 0) {
    qtyDisplay.style.display = 'inline';
    qtyDisplay.textContent = `x${currentProduct.qty}`;

    if (currentProduct.qty > -1) {
      removeOneBtn.style.display = 'inline';
    } else {
      removeOneBtn.style.display = 'none';
    }
  } else {
    qtyDisplay.style.display = 'none';
    removeOneBtn.style.display = 'none';
  }
}


addToCartBtn.addEventListener('click', () => {
  if (!currentProduct.name || isNaN(currentProduct.price)) return;

  // cherche si le produit existe d√©j√† dans le panier
  let existing = cart.find(p => p.name === currentProduct.name);

  if (existing) {
    existing.qty += 1;
  } else {
    cart.push({
      name: currentProduct.name,
      price: currentProduct.price,
      qty: 1
    });
  }

  currentProduct.qty += 1;
  updateQtyDisplay();
  updateCartUI();
});

removeOneBtn.addEventListener('click', () => {
  if (!currentProduct.name) return;

  let existing = cart.find(p => p.name === currentProduct.name);

  if (existing && existing.qty > 1) {
    existing.qty -= 1;
    currentProduct.qty -= 1;
  } else if (existing && existing.qty === 1) {
    cart.splice(cart.indexOf(existing), 1);
    currentProduct.qty = 0;
  }

  updateQtyDisplay();
  updateCartUI();
});

  
// Fermeture de la modale produit
document.querySelector('#product-modal .close').addEventListener('click', () => {
  const modal = document.getElementById('product-modal');
  modal.classList.remove('show');
  modal.classList.add('hidden');
});

// Fermeture de la modale panier
document.querySelector('#cart-modal .close').addEventListener('click', () => {
  const modal = document.getElementById('cart-modal');
  modal.classList.remove('show');
  modal.classList.add('hidden');
});


window.onload = () => {
  const cartButton = document.getElementById('cart-button');
  cartButton.addEventListener('click', () => {
    updateCartModal();
	// Fermer la modale produit si elle est ouverte
	document.getElementById('product-modal').classList.remove('show');
	document.getElementById('product-modal').classList.add('hidden');

	cartModal.classList.remove('hidden');
	cartModal.classList.add('show');
  });

  // Masquer "Total" au d√©marrage
  document.getElementById('cart-label').style.display = 'none';
};


</script>
</body>
</html>

